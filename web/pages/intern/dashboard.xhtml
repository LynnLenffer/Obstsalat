<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:a="http://xmlns.jcp.org/jsf/passthrough">

    <ui:composition template="/pages/template/layout.xhtml">

        <ui:define name="header">
            <ui:include src="/pages/template/loggedInHeader.xhtml" />
        </ui:define>


        <ui:define name="content">

            <h:panelGroup layout="block" class="row">

                <h:panelGroup layout="block" class="col-sm-3">
                    <h:panelGroup layout="block" class="box green">

                        <p>Verfasse einen Post</p>

                        <h:form id="writePost">
                            <h:inputTextarea a:placeholder="Deine Nachricht..." id="message" rows="10" required="true"/>
                            <h:commandButton id="postButton" class="orange maxWidth" value="Posten" action="#{postBean.writePost}"/>
                        </h:form>

                    </h:panelGroup>
                </h:panelGroup>

                <h:panelGroup layout="block" class="col-sm-6">

                    <ui:repeat value="#{postBean.posts}" var="post">

                        <h:panelGroup layout="block" class="box orange">
                            <h:panelGroup layout="block" class="row">
                                <h:panelGroup layout="block" class="col-sm-3">
                                    <div class="postImage" style="background-image: url(/img/profile/#{post.user_image});"></div>
                                </h:panelGroup>

                                <h:panelGroup layout="block" class="col-sm-9">

                                    <h:panelGroup layout="block" class="row message">
                                        <h:panelGroup layout="block" class="col-sm-12">
                                            <p>#{post.post_message}</p>
                                        </h:panelGroup>
                                    </h:panelGroup>

                                </h:panelGroup>

                            </h:panelGroup>

                            <h:panelGroup layout="block" class="postDetailsWrapper">

                                <h:panelGroup layout="block" class="col-sm-4 col-sm-offset-3">
                                    <h:graphicImage class="ratingImage ratingElement" value="/img/rating_positive.png" />
                                    <p class="postDetails ratingElement">#{post.post_rating_positive}</p>
                                    <h:graphicImage class="ratingImage ratingElement" value="/img/rating_negative.png" />
                                    <p class="postDetails ratingElement">#{post.post_rating_negative}</p>
                                </h:panelGroup>

                                <h:panelGroup layout="block" class="col-sm-5">
                                    <p class="postDetails">Geposted am: #{post.post_creation_date}</p>
                                </h:panelGroup>

                            </h:panelGroup>
                        </h:panelGroup>

                    </ui:repeat>

                </h:panelGroup>

                <h:panelGroup layout="block" class="col-sm-3">
                    <h:panelGroup layout="block" class="box green">

                        <p>Du suchst einen Post?</p>

                        <h:form id="searchPost">
                            <h:inputText a:placeholder="Suchbegriff..." id="searchTerm" required="true"/>
                            <h:message class="validateMessage" for="searchTerm"/>
                            <h:commandButton id="searchButton" class="orange maxWidth" value="Suchen" action="#{postBean.searchPost}"/>
                        </h:form>

                    </h:panelGroup>
                </h:panelGroup>

            </h:panelGroup>

        </ui:define>
    </ui:composition>

</html>
